# 浮点数运算

在 C++ 中，`floor` 和 `round` 是 `<cmath>` 头文件中用于**浮点数取整**的核心函数，二者取整规则完全不同，也是解决这道正态分布题的关键，下面用 “人话 + 例子” 讲清楚：

### 一、floor 函数：向下取整（“地板取整”）

#### 定义

取不大于目标浮点数的**最大整数**（简单说：往小的方向取整，不管小数部分是多少）。

#### 语法

cpp



运行









```cpp
double floor(double x);
```

#### 例子（最直观）

| 输入值 x | floor (x) 结果 | 解释                                              |
| -------- | -------------- | ------------------------------------------------- |
| 1.04     | 1.0            | 不大于 1.04 的最大整数是 1                        |
| 1.99     | 1.0            | 哪怕小数部分接近 2，仍取 1                        |
| -1.04    | -2.0           | 不大于 - 1.04 的最大整数是 - 2（-2 < -1.04 < -1） |
| 2.0      | 2.0            | 整数本身取自身                                    |

#### 本题中的作用

cpp



运行









```cpp
double z_row_part = floor(Z * 10) / 10.0;
```

比如 `Z=1.04` → `Z*10=10.4` → `floor(10.4)=10.0` → `10.0/10=1.0`，精准提取 “整数 + 十分位” 部分（1.0），忽略百分位及以后的数。

### 二、round 函数：四舍五入取整

#### 定义

将浮点数按 “四舍五入” 规则取到最近的整数（小数部分≥0.5 则进 1，否则舍去）。

#### 语法

cpp



运行









```cpp
double round(double x);
```

#### 例子

| 输入值 x | round (x) 结果 | 解释                                  |
| -------- | -------------- | ------------------------------------- |
| 1.04     | 1.0            | 小数部分 0.04 < 0.5，舍去             |
| 1.50     | 2.0            | 小数部分 0.5，进 1                    |
| 1.499    | 1.0            | 小数部分 < 0.5，舍去                  |
| -1.04    | -1.0           | 小数部分 0.04 <0.5，舍去（-1> -1.04） |
| -1.50    | -2.0           | 小数部分 0.5，进 1（-2 < -1.5）       |

#### 本题中的作用

cpp



运行









```cpp
int z_col_part = (int)round((Z - z_row_part) * 100);
```

比如 `Z=1.04` → `Z - z_row_part = 0.04` → `0.04*100=4.0` → `round(4.0)=4`，得到百分位的数字；

若 `Z=1.046` → `0.046*100=4.6` → `round(4.6)=5`，实现百分位的四舍五入，符合表格列的取值规则。

### 三、floor vs round 核心区别（一张表看懂）

| 函数  | 取整规则           | 输入 1.04 | 输入 1.99 | 输入 1.5 |
| ----- | ------------------ | --------- | --------- | -------- |
| floor | 向下取整（往小取） | 1.0       | 1.0       | 1.0      |
| round | 四舍五入（往近取） | 1.0       | 2.0       | 2.0      |

### 四、使用注意事项

1. 必须包含头文件：`#include <cmath>`，否则编译报错；
2. 返回值类型：默认返回`double`，需转`int`时要强制类型转换（如本题的`(int)round(...)`）；
3. 精度问题：浮点数运算可能有微小误差（比如`0.04*100`可能得到`3.9999999999`而非`4.0`），`round`能修正这种误差。