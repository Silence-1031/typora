（1）CS和BS架构

这两种是软件的两种常见系统架构，核心区别在于**用户端的形态和交互方式**：

1. **CS 架构（Client/Server，客户端 / 服务器架构）**
   - 结构：分为客户端（本地安装的软件）和服务器端两部分，客户端需要单独下载、安装到用户的设备中
   - 特点：客户端可以缓存数据，和服务器的交互可以更灵活，运行速度通常更快，能实现的功能更丰富；但需要单独适配不同的操作系统，用户需要手动更新客户端
   - 例子：电脑上的微信客户端、Steam 客户端、网易云音乐客户端
2. **BS 架构（Browser/Server，浏览器 / 服务器架构）**
   - 结构：没有独立的客户端，用户只需要通过浏览器（比如 Chrome、Edge），访问对应的网址就能使用系统，所有的业务逻辑都在服务器端运行
   - 特点：不需要单独安装客户端，也不需要手动更新，跨平台性更强（只要有浏览器就能用）；但运行速度受浏览器和网络的影响更大，能实现的功能会受浏览器的一些限制
   - 例子：网页版的知乎、网页版的淘宝、企业的 OA 系统网页端



（2）网络编程三要素

| 要素    | 作用                                                         | 类比理解                                              |
| ------- | ------------------------------------------------------------ | ----------------------------------------------------- |
| IP 地址 | 设备在网络中的**唯一标识**，用于定位设备                     | 设备的 “身份证号”                                     |
| 端口    | 应用程序在设备中的**唯一标识**，用于区分设备上的不同程序     | 设备的 “门牌号”（如微信对应特定端口，避免与 QQ 冲突） |
| 协议    | 网络中数据传输的**规则**（如连接方式、数据格式、是否需确认） | 通信双方的 “对话准则”                                 |



（3）TCP/IP协议

TCP/IP 协议是互联网的**通信规则集合**，是所有设备能在互联网上互相通信的基础，它不是单个协议，是一个包含了几十种协议的协议族，核心是分层设计，把复杂的通信过程拆分成了 4 个层级，每一层负责不同的工作：

1. **应用层**：直接对接用户使用的软件，负责处理具体的业务数据，比如我们常用的 HTTP（网页访问）、HTTPS（加密网页访问）、FTP（文件传输）、SMTP（邮件发送）都属于这一层

2. 传输层

   ：负责在两台设备的应用程序之间建立 “数据传输的通道”，核心是两个协议：

   - TCP：可靠的传输协议，会确认数据是否送达、重发丢失的数据，保证数据完整有序，比如网页加载、文件下载会用 TCP
   - UDP：不可靠的传输协议，只负责发数据不确认是否收到，速度更快，比如直播、视频通话会用 UDP

3. **网络层**：负责找到数据要去的目标设备，核心是 IP 协议，给每一台联网设备分配唯一的 IP 地址，相当于设备的 “互联网身份证”，负责规划数据从 A 到 B 的路线

4. **网络接口层**：负责处理具体的硬件传输，比如把数据转换成网线、无线网能传输的信号，对接的是网卡、路由器这些硬件



（4）传输层核心协议：UDP 与 TCP

传输层有两种核心协议，开发者需根据业务场景选择，二者特性完全相反：

（1）UDP 协议（用户数据报协议-User Datagram Protocol）

- 核心特点：**无连接、不可靠、高效率**
  - 无连接：通信前无需建立连接，直接发送数据包 (包含：自己的IP、端口、目的地IP、端口和数据等)；
  - 不可靠：发送方不确认接收方是否在线，数据丢失不重发，接收方收到数据也不返回确认；
  - 高效率：无需连接和确认流程，传输速度快；
  - 数据限制：单个数据包最大为 64KB。
- **适用场景**：对可靠性要求低、对实时性要求高的场景，如**视频直播、语音通话**（丢失少量数据仅导致画面 / 声音短暂模糊，不影响整体体验）。

 （2）TCP 协议（传输控制协议-Tansmission Control Protocol）

- 核心特点：**面向连接、可靠、低效率**
  - 面向连接：通信前必须通过 “三次握手” 建立可靠连接；
  - 可靠：通过 “数据确认”“重传机制”“消息 ID 去重” 确保数据不丢失、不重复；
  - 低效率：连接和确认流程会增加耗时；
  - 数据无限制：可传输大量数据（如文件、大文本）。
- **适用场景**：对可靠性要求高、不允许数据丢失的场景，如**网页下载、文件传输、支付功能**（丢失数据会导致页面错乱、文件损坏或支付异常）。

4. TCP 协议的关键机制

 （1）三次握手（建立连接）

- **目的**：确保通信双方 “既能发消息，也能收消息”（全双工模式），避免连接建立后一方无法收发的问题。
- 流程逻辑：
  - 客户端 → 服务端：“我要连接你”（服务端收到后，确认 “客户端能发”）；
  - 服务端 → 客户端：“我收到你的请求了”（客户端收到后，确认 “服务端能收也能发”）；
  - 客户端 → 服务端：“好的，开始连接”（服务端收到后，确认 “客户端能收”）。

 （2）四次挥手（断开连接）

- **目的**：确保双方已完成所有数据收发，避免断开后残留未处理数据。
- 流程逻辑：
  - 客户端 → 服务端：“我要断开连接”（服务端收到后，确认 “断开请求已送达”）；
  - 服务端 → 客户端：“收到请求，稍等我处理剩余数据”（客户端收到后，等待服务端收尾）；
  - 服务端 → 客户端：“我处理完了，可以断开了”（客户端收到后，确认 “服务端无残留数据”）；
  - 客户端 → 服务端：“好的，断开”（服务端收到后，正式断开连接）。

（3）数据可靠性保障补充

- **确认机制**：服务端收到数据后，会向客户端返回 “ACK 确认信号”；若客户端未收到确认，会重发数据，直到服务端确认。
- **去重机制**：每个数据包携带唯一 “消息 ID”，服务端收到重复 ID 的数据包时，会直接拒绝并返回确认，避免数据重复处理。



（5）BS 架构的通信流程

- **请求发起**：浏览器通过`HTTP协议`发起请求，请求地址格式为`http://IP地址:端口号`（如`http://127.0.0.1:8080`）。
  - HTTP 协议：浏览器与服务端的 “沟通规则”，规定请求 / 响应的数据格式。
- **连接建立**：浏览器与服务端通过`TCP Socket管道`建立通信连接（类似 CS 架构的 Socket 通信），主线程负责接收客户端连接，子线程（或线程池）处理具体的数据响应。
- **数据响应**：服务端向浏览器返回符合 HTTP 协议格式的数据，浏览器解析后展示为网页。

2. 服务端响应的 HTTP 协议格式

![image-20251101135136149](C:\Users\Silence\AppData\Roaming\Typora\typora-user-images\image-20251101135136149.png)

浏览器仅识别符合 HTTP 协议格式的数据，响应格式需严格遵循以下 3 点：

|     格式要求     |                             说明                             |                             示例                             |
| :--------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|  第一行：状态行  | 声明 HTTP 协议版本、响应状态码（200 表示 “正常响应”，404 表示 “资源未找到”） |                      `HTTP/1.1 200 OK`                       |
|  第二行：响应头  | 声明响应内容的类型、编码等元信息，核心头字段为`Content-Type`（指定内容类型） | `Content-Type: text/html; charset=UTF-8`（表示内容为 HTML 文本，编码为 UTF-8，避免乱码） |
|     空行分隔     | 响应头与网页内容之间必须加**单独空行**（作为格式分隔符，缺一不可） |                              -                               |
| 后续内容：响应体 |  实际的网页内容（HTML 代码），可包含标签、样式、图片链接等   | `<html><body><h1 style="color:red">听我讲Java</h1></body></html>` |